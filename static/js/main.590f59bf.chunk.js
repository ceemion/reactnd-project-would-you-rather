(this["webpackJsonpreactnd-project-would-you-rather"]=this["webpackJsonpreactnd-project-would-you-rather"]||[]).push([[0],{37:function(e,t,n){e.exports=n.p+"static/media/react-logo.5d5d9eef.svg"},38:function(e,t,n){e.exports=n.p+"static/media/redux-logo.5ae1af16.svg"},42:function(e,t,n){e.exports=n(56)},47:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),c=n.n(o),s=(n(47),n(13)),l=n(6),i=n(7),u=n(8),m=n(9),d=n(10),p=n(24),v=n(17),E=n(5),h=n(15),b=n.n(h),f=n(18),O=n(2),g=n(4),j={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://avatars2.githubusercontent.com/u/9349859?s=400",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://tylermcginnis.com/would-you-rather/tyler.jpg",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://tylermcginnis.com/would-you-rather/dan.jpg",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},w={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function y(e){return new Promise((function(t,n){var a=e.author,r=function(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}(e);setTimeout((function(){w=Object(g.a)({},w,Object(O.a)({},r.id,r)),j=Object(g.a)({},j,Object(O.a)({},a,Object(g.a)({},j[a],{questions:j[a].questions.concat([r.id])}))),t(r)}),1e3)}))}function T(e){return function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise((function(e,r){setTimeout((function(){j=Object(g.a)({},j,Object(O.a)({},t,Object(g.a)({},j[t],{answers:Object(g.a)({},j[t].answers,Object(O.a)({},n,a))}))),w=Object(g.a)({},w,Object(O.a)({},n,Object(g.a)({},w[n],Object(O.a)({},a,Object(g.a)({},w[n][a],{votes:w[n][a].votes.concat([t])}))))),e()}),500)}))}(e)}function N(e,t){return function(n,a){n(Object(h.showLoading)());var r,o=a().authUser;return(r=Object(g.a)({},e,{author:o}),y(r)).then((function(e){var a,r;n(Object(h.hideLoading)()),n(function(e){return{type:"ADD_QUESTION",question:e}}(e)),n((a=o,r=e.id,{type:"UPDATE_USER_QUESTIONS",user:a,questionId:r})),t()}))}}function x(){return function(e){return e(Object(h.showLoading)()),Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(g.a)({},j))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(g.a)({},w))}),1e3)}))]).then((function(e){var t=Object(f.a)(e,2);return{users:t[0],questions:t[1]}})).then((function(t){var n=t.users,a=t.questions;e(Object(h.hideLoading)()),e(function(e){return{type:"RECEIVE_USERS",users:e}}(n)),e(function(e){return{type:"RECEIVE_QUESTIONS",questions:e}}(a))}))}}var q=n(37),U=n.n(q),S=n(38),k=n.n(S),R=n(41),_=function(e){var t=e.id,n=e.text,a=e.onClick,o=e.type,c=e.size,s=e.isDisabled;return r.a.createElement("button",{id:t,onClick:a,className:"btn ".concat(o," ").concat(c),disabled:s||!1},n)},I=Object(p.g)(Object(E.connect)((function(e){var t=e.users;return{loadingBar:e.loadingBar,userOptions:Object.keys(t).sort((function(e,t){return e.localeCompare(t)})).map((function(e){return{value:e,label:t[e].name}}))}}))((function(e){var t=e.userOptions,n=e.loadingBar,o=Object(a.useState)(null),c=Object(f.a)(o,2),s=c[0],l=c[1],i=function(e,t){if(t.state){var n=t.state.from.pathname;e.push(n)}else e.push("/")};return r.a.createElement("div",{className:"wrapper login"},r.a.createElement("div",{className:"logo"},r.a.createElement("p",null,"Would"),r.a.createElement("p",null,"You"),r.a.createElement("p",null,"Rather?")),r.a.createElement("div",{className:"logo-subtext"},"React Nanodegree Project"),r.a.createElement("div",{className:"intro-images"},r.a.createElement("div",{className:"intro-img"},r.a.createElement("img",{src:U.a,alt:"React"})),r.a.createElement("div",{className:"intro-img redux"},r.a.createElement("img",{src:k.a,alt:"Redux"}))),n.default>0?r.a.createElement("div",null,"Loading users..."):r.a.createElement("div",null,"Please login to continue",r.a.createElement("form",null,r.a.createElement(R.a,{id:"user-select",className:"user-select",value:s,options:t,onChange:l,placeholder:"Select User..."}),r.a.createElement(_,{text:"Log in",type:"primary",onClick:function(t){var n=e.dispatch,a=e.history,r=e.location;t.preventDefault(),n({type:"SET_AUTH_USER",id:s.value}),i(a,r)},isDisabled:null===s}))))}))),A={formatQuestion:function(e,t){var n=e.id,a=e.author,r=e.optionOne,o=e.optionTwo,c=e.timestamp,s=t[a];return{id:n,name:s.name,timestamp:c,avatar:s.avatarURL,optionOneText:r.text,optionOneVotes:r.votes,optionTwoText:o.text,optionTwoVotes:o.votes}},questionAnswered:function(e,t){return e.optionOne.votes.includes(t)||e.optionTwo.votes.includes(t)},questionNotAnswered:function(e,t){return!e.optionOne.votes.includes(t)&&!e.optionTwo.votes.includes(t)},calcPercentage:function(e,t){var n=parseInt(e),a=parseInt(t);return Math.round(n/a*100)}},C=Object(E.connect)((function(e,t){var n=e.questions,a=e.users,r=t.id;return{id:r,question:A.formatQuestion(n[r],a)}}))((function(e){var t=e.question;return null===t?r.a.createElement("div",null,"This question does not exist."):r.a.createElement("div",{className:"question-card"},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.avatar,alt:"".concat(t.name," avatar"),width:100})),r.a.createElement("div",null,r.a.createElement("h4",{className:"name"},t.name))),r.a.createElement("div",{className:"summary"},r.a.createElement("h4",null,"Would you rather..."),r.a.createElement("p",null,t.optionOneText),r.a.createElement("p",null,"or"),r.a.createElement("p",null,"..."),r.a.createElement(v.b,{to:"questions/".concat(t.id),className:"link"},"View Poll")))})),D=Object(E.connect)((function(e){var t=e.authUser;return{userData:e.users[t]}}))((function(e){var t=e.userData,n=e.dispatch;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"nav-logo"},r.a.createElement("p",null,"Would"),r.a.createElement("p",null,"You"),r.a.createElement("p",null,"Rather?")),r.a.createElement("div",{className:"links"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(v.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(v.c,{to:"/leaderboard"},"Leader Board")),r.a.createElement("li",null,r.a.createElement(v.c,{to:"/add"},"New Question")))),r.a.createElement("div",{className:"auth-user"},r.a.createElement("div",null,"Hi, ",t.name),r.a.createElement("div",null,r.a.createElement("img",{src:t.avatarURL,alt:"".concat(t.avatarURL," avatar"),width:40})),r.a.createElement("div",null,r.a.createElement(_,{id:"logout-btn",size:"sm",text:"Log Out",onClick:function(){return n({type:"LOGOUT_AUTH_USER"})}}))))})),P=Object(E.connect)((function(e){var t=e.authUser,n=e.questions,a=Object.keys(n).sort((function(e,t){return n[t].timestamp-n[e].timestamp}));return{unansweredQuestionsId:a.filter((function(e){return A.questionNotAnswered(n[e],t)})),answeredQuestionsId:a.filter((function(e){return A.questionAnswered(n[e],t)}))}}))((function(e){var t=e.unansweredQuestionsId,n=e.answeredQuestionsId,o=Object(a.useState)(0),c=Object(f.a)(o,2),s=c[0],l=c[1],i=function(e){l(e)},u=function(e){return s===e?"tab active":"tab"};return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper home"},r.a.createElement("div",{className:"home-nav"},r.a.createElement("div",{className:u(0),onClick:function(){return i(0)}},"Unanswered Questions",r.a.createElement("span",{className:"pill"},t.length)),r.a.createElement("div",{className:u(1),onClick:function(){return i(1)}},"Answered Questions",r.a.createElement("span",{className:"pill"},n.length))),r.a.createElement("div",{className:"home-content"},0===s&&(t.length>0?t.map((function(e){return r.a.createElement(C,{key:e,id:e})})):r.a.createElement("div",{className:"wrapper-status"},"You're all caught up! No unanswered questions.")),1===s&&(n.length>0?n.map((function(e){return r.a.createElement(C,{key:e,id:e})})):r.a.createElement("div",{className:"wrapper-status"},"No answered questions. Get into the game by voting!")))))})),Q=Object(E.connect)((function(e,t){var n=e.users,a=t.id;return{id:a,user:n[a]}}))((function(e){var t=e.user;return r.a.createElement("div",{className:"user-card"},r.a.createElement("div",{className:"user"},r.a.createElement("div",null,r.a.createElement("h2",{className:"name"},t.name)),r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:t.avatarURL,alt:"".concat(t.name," avatar"),width:100}))),r.a.createElement("div",{className:"summary"},r.a.createElement("p",null,"Asked Questions: ",t.questions.length),r.a.createElement("p",null,"Answered Questions: ",Object.keys(t.answers).length),r.a.createElement("p",{className:"score"},"SCORE: ",r.a.createElement("br",null)," ",r.a.createElement("span",null,function(e){return e.questions.length+Object.keys(e.answers).length}(t)))))})),z=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper leader-board"},r.a.createElement("h2",null,"Leader Board"),this.props.usersId.map((function(e){return r.a.createElement(Q,{key:e,id:e})}))))}}]),t}(a.Component),L=function(e,t){return e[t].questions.length+Object.keys(e[t].answers).length},V=function(e){return Object.keys(e).sort((function(t,n){return L(e,n)-L(e,t)}))},B=Object(E.connect)((function(e){var t=e.users;return{usersId:V(t)}}))(z),F=Object(p.g)(Object(E.connect)((function(e){return{loadingBar:e.loadingBar}}))((function(e){var t=Object(a.useState)({optionOneText:"",optionTwoText:""}),n=Object(f.a)(t,2),o=n[0],c=n[1],s=function(e){var t=e.target.value,n=e.target.name;c((function(e){return Object(g.a)({},e,Object(O.a)({},n,t))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper new-question"},r.a.createElement("h2",null,"New Polling Question"),r.a.createElement("form",{className:"question-form"},r.a.createElement("p",null,"Complete the question:"),r.a.createElement("h4",null,"Would you rather..."),r.a.createElement("div",null,r.a.createElement("input",{id:"optionOne",type:"text",name:"optionOneText",value:o.optionOneText,onChange:s,placeholder:"Option One...",className:"text-input",required:!0})),r.a.createElement("div",{className:"or"},r.a.createElement("p",null,"OR")),r.a.createElement("div",null,r.a.createElement("input",{id:"optionTwo",type:"text",name:"optionTwoText",value:o.optionTwoText,onChange:s,placeholder:"Option Two...",className:"text-input",required:!0})),r.a.createElement("div",{className:"cta"},r.a.createElement(_,{text:"Save",id:"save-poll",type:"primary",onClick:function(t){var n=e.dispatch,a=e.history;t.preventDefault(),n(N(o,(function(){return a.push("/")})))},isDisabled:function(){var t=e.loadingBar;return!o.optionOneText||!o.optionTwoText||1===t.default}()})))))}))),W=function(e){var t=e.progress;return r.a.createElement("div",{className:"percent-bar"},r.a.createElement("div",{className:"progress",style:{width:"".concat(t,"%")}},t,"%"))},H=Object(p.g)(Object(E.connect)((function(e,t){var n=e.authUser,a=e.questions,r=e.users,o=e.loadingBar,c=a[t.match.params.question_id];return{authUser:n,loadingBar:o,question:c?A.formatQuestion(c,r):null,answered:!!c&&A.questionAnswered(c,n),totalUsers:Object.keys(r).length}}))((function(e){var t=e.authUser,n=e.question,o=e.answered,c=e.dispatch,s=e.totalUsers,l=e.loadingBar,i=Object(a.useState)(""),u=Object(f.a)(i,2),m=u[0],d=u[1],p=function(e){return m===e?"option active":"option"};return null===n?r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",null,"Not Found"),r.a.createElement("div",{className:"wrapper-status"},"Poll does not exist"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper question-details"},r.a.createElement("h5",null,n.name," ",o?"asked:":"asks..."),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"user"},r.a.createElement("img",{src:n.avatar,alt:"".concat(n.avatar," avatar"),width:100})),r.a.createElement("div",{className:"questions"},o?r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Poll Results"),r.a.createElement("div",{className:"answer ".concat(n.optionOneVotes.includes(t)?"selected":"")},r.a.createElement("p",null,n.optionOneText),r.a.createElement(W,{progress:A.calcPercentage(n.optionOneVotes.length,s)}),r.a.createElement("p",null,n.optionOneVotes.length," out of ",s," votes")),r.a.createElement("div",{className:"answer ".concat(n.optionTwoVotes.includes(t)?"selected":"")},r.a.createElement("p",null,n.optionTwoText),r.a.createElement(W,{progress:A.calcPercentage(n.optionTwoVotes.length,s)}),r.a.createElement("p",null,n.optionTwoVotes.length," out of ",s," votes"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Would you rather?"),r.a.createElement("div",{className:"options"},r.a.createElement("div",{className:p("optionOne"),onClick:function(){return d("optionOne")}},n.optionOneText),r.a.createElement("div",{className:p("optionTwo"),onClick:function(){return d("optionTwo")}},n.optionTwoText))),o||r.a.createElement("div",{className:"cta"},r.a.createElement(_,{id:"vote-btn",text:"Vote Now",type:"primary",onClick:function(e){e.preventDefault(),c(function(e,t){return function(n,a){n(Object(h.showLoading)());var r=a().authUser;return T({authedUser:r,qid:e,answer:t}).then((function(){n(Object(h.hideLoading)()),n(function(e,t,n){return{type:"UPDATE_QUESTION_VOTE",authUser:e,qid:t,vote:n}}(r,e,t)),n(function(e,t,n){return{type:"UPDATE_USER_ANSWERS",user:e,questionId:t,vote:n}}(r,e,t))}))}}(n.id,m)),d("")},isDisabled:!m||1===l.default}))))))}))),M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement("div",{className:"wrapper"},r.a.createElement("h2",null,"404 - Not Found"),r.a.createElement("div",{className:"wrapper-status"},"The page you seek cannot be found :(")))},G=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.authUser,n=e.dispatch;null===t&&n(x())}},{key:"render",value:function(){var e=this.props.authUser,t=function(t){var n=t.children,a=Object(s.a)(t,["children"]);return r.a.createElement(p.b,Object.assign({},a,{render:function(t){var a=t.location;return e?n:r.a.createElement(p.a,{to:{pathname:"/login",state:{from:a}}})}}))};return r.a.createElement(v.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{className:"loading-bar"}),r.a.createElement("div",{className:"container"},r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/login"},r.a.createElement(I,null)),r.a.createElement(t,{exact:!0,path:"/"},r.a.createElement(P,null)),r.a.createElement(t,{path:"/add"},r.a.createElement(F,null)),r.a.createElement(t,{path:"/questions/:question_id"},r.a.createElement(H,null)),r.a.createElement(t,{path:"/leaderboard"},r.a.createElement(B,null)),r.a.createElement(t,{path:"*"},r.a.createElement(M,null))))))}}]),t}(a.Component),J=Object(E.connect)((function(e){return{authUser:e.authUser}}))(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(23);var $=Object(Y.c)({loadingBar:h.loadingBarReducer,authUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTH_USER":return t.id;case"LOGOUT_AUTH_USER":return null;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS":return Object(g.a)({},e,{},t.users);case"UPDATE_USER_QUESTIONS":return Object(g.a)({},e,Object(O.a)({},t.user,Object(g.a)({},e[t.user],{questions:e[t.user].questions.concat([t.questionId])})));case"UPDATE_USER_ANSWERS":return Object(g.a)({},e,Object(O.a)({},t.user,Object(g.a)({},e[t.user],{answers:Object(g.a)({},e[t.user].answers,Object(O.a)({},t.questionId,t.vote))})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_QUESTIONS":return Object(g.a)({},e,{},t.questions);case"ADD_QUESTION":return Object(g.a)({},e,Object(O.a)({},t.question.id,t.question));case"UPDATE_QUESTION_VOTE":return Object(g.a)({},e,Object(O.a)({},t.qid,Object(g.a)({},e[t.qid],Object(O.a)({},t.vote,Object(g.a)({},e[t.qid][t.vote],{votes:e[t.qid][t.vote].votes.concat(t.authUser)})))));default:return e}}}),K=n(40),X=function(e){return function(t){return function(n){console.group(n.type),console.log("The action is: ",n);var a=t(n);return console.log("The new state is: ",e.getState()),console.groupEnd(),a}}},Z=Object(Y.a)(K.a,X),ee=Object(Y.d)($,Z);c.a.render(r.a.createElement(E.Provider,{store:ee},r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.590f59bf.chunk.js.map